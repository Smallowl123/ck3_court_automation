namespace = cpa
cpa.1 = {
	#Bunch of triggers checking if position require filling and firing events
	hidden = yes
	trigger = {
		is_ai = no
	}
	immediate = {
		remove_global_variable = cpa_event_been_triggered
		#Court Physician
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = court_physician_court_position
				has_global_variable = court_physician_auto
			}
			trigger_event = cpa_physician.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Chief Eunuch
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = chief_eunuch_court_position
				has_global_variable = chief_eunuch_auto
			}
			trigger_event = cpa_eunuch.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Keeper of Swans
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = keeper_of_swans_court_position
				has_global_variable = keeper_of_swans_auto
			}
			trigger_event = cpa_keeper_of_swans.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Master of Horse
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = master_of_horse_court_position
				has_global_variable = master_of_horse_auto
			}
			trigger_event = cpa_master_of_horse.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Court Jester
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = court_jester_court_position
				has_global_variable = court_jester_auto
			}
			trigger_event = cpa_court_jester.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Master of Hunt
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = master_of_hunt_court_position
				has_global_variable = master_of_hunt_auto
			}
			trigger_event = cpa_master_of_hunt.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#High Almoner
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = high_almoner_court_position
				has_global_variable = high_almoner_auto
			}
			trigger_event = cpa_high_almoner.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Cup-Bearer
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = cupbearer_court_position
				has_global_variable = cupbearer_auto
			}
			trigger_event = cpa_cupbearer.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Seneschal
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = seneschal_court_position
				has_global_variable = seneschal_auto
			}
			trigger_event = cpa_seneschal.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Antiquarian
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = antiquarian_court_position
				has_global_variable = antiquarian_auto
			}
			trigger_event = cpa_antiquarian.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Court Tutor
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = court_tutor_court_position
				has_global_variable = court_tutor_auto
			}
			trigger_event = cpa_court_tutor.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Royal Architect
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = royal_architect_court_position
				has_global_variable = royal_architect_auto
			}
			trigger_event = cpa_royal_architect.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Court Poet
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = court_poet_court_position
				has_global_variable = court_poet_auto
			}
			trigger_event = cpa_court_poet.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
		#Bodyguard (who fights like a crow)
		if = {
			limit = {
				NOT = {
					has_global_variable = cpa_event_been_triggered
				}
				can_employ_court_position_type = bodyguard_court_position
				has_global_variable = bodyguard_auto
			}
			trigger_event = cpa_bodyguard.1
			set_global_variable = {
				name = cpa_event_been_triggered
				value = yes
			}
		}
	}
}
